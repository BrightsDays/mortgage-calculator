{"version":3,"sources":["components/form/validate.js","components/form/results.js","components/form/calc.js","components/form/index.js","components/form/form.js","components/app/index.js","components/app/app.js","index.js"],"names":["Validate","eventTarget","max","value","replace","Results","loanBody","monthlyPayment","requiredIncome","overpayment","className","Calc","price","part","time","percent","result","months","calcLoanBody","numPrice","numPart","resultLoanBody","Math","round","toString","calcMonthlyPayment","numPercent","resultMonthlyPayment","pow","Infinity","calcRequiredIncome","resultRequiredIncome","calcOverpayment","resultOverpayment","Form","savedPrice","localStorage","getItem","savedPart","savedTime","savedPercent","useState","setPrice","setPart","setTime","setPercent","data","setData","disabled","setDisabled","factor","setFactor","lockClass","setLockClass","useEffect","anchor","SaveButton","onClick","e","preventDefault","setItem","ClearButton","document","querySelectorAll","forEach","item","checked","Lock","onInput","target","placeholder","type","name","onChange","App","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.c23f4f09.chunk.js","sourcesContent":["const Validate = (eventTarget, max) => {\r\n    eventTarget.value = eventTarget.value.replace(/[^0-9]/g,'');\r\n    const nValue = eventTarget.value.replace(/\\s/g, \"\");\r\n\r\n    if (+nValue <= max) {\r\n        eventTarget.value = eventTarget.value.replace(/^0+/, '');\r\n        eventTarget.value = eventTarget.value.replace(/(\\..*)\\./g, '$1');\r\n    } else {\r\n        eventTarget.value = max;\r\n        eventTarget.value = eventTarget.value.replace(/(\\..*)\\./g, '$1');\r\n    }\r\n    \r\n    eventTarget.value = eventTarget.value.replace(/\\B(?=(\\d{3})+(?!\\d))/g, \" \");\r\n};\r\n\r\nexport default Validate;","import React from 'react';\r\n\r\nconst Results = ({ loanBody, monthlyPayment, requiredIncome, overpayment }) => {\r\n  \r\n  return (\r\n    <div className=\"mortgage-results\">\r\n      <div className=\"mortgage-results__item\">\r\n          <p>Тело кредита</p>\r\n          <b>{loanBody || '0'} ₽</b>\r\n      </div>\r\n      <div className=\"mortgage-results__item\">\r\n          <p>Ежемесяный платеж</p>\r\n          <b>{monthlyPayment || '0'} ₽</b>\r\n      </div>\r\n      <div className=\"mortgage-results__item\">\r\n          <p>Необходимый доход</p>\r\n          <b>{requiredIncome || '0'} ₽</b>\r\n      </div>\r\n      <div className=\"mortgage-results__item\">\r\n          <p>Переплата</p>\r\n          <b>{overpayment || '0'} ₽</b>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Results;","const Calc = (price = '0', part = '0', time = '0', percent = '0') => {\r\n  let result = {\r\n    loanBody: 0,\r\n    monthlyPayment: 0,\r\n    overpayment: 0,\r\n    requiredIncome: 0,\r\n  };\r\n  const months = +time * 12;\r\n\r\n  const calcLoanBody = (price, part) => {\r\n    const numPrice = +(price.replace(/\\s/g, \"\"));\r\n    const numPart = +(part.replace(/\\s/g, \"\"));\r\n\r\n    const resultLoanBody = Math.round(numPrice - numPart);\r\n\r\n    if (typeof resultLoanBody == 'number' && resultLoanBody >= 0) {\r\n      result.loanBody = resultLoanBody.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \" \");\r\n    } else {\r\n      result.loanBody = '0';\r\n    }\r\n  };\r\n\r\n  const calcMonthlyPayment = (percent, months) => {\r\n    const numPercent = +(percent.replace(/\\s/g, \"\"));\r\n    const resultLoanBody = +(result.loanBody.replace(/\\s/g, \"\"));\r\n\r\n    const resultMonthlyPayment = Math.round(resultLoanBody * \r\n      (numPercent/1200 + ((numPercent/1200)/(Math.pow((1 + (numPercent/1200)), months) - 1))));\r\n  \r\n      if (typeof resultMonthlyPayment == 'number' && resultMonthlyPayment >= 0 && resultMonthlyPayment !== Infinity) {\r\n        result.monthlyPayment = resultMonthlyPayment.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \" \");\r\n      } else {\r\n        result.monthlyPayment = '0';\r\n      }\r\n  };\r\n\r\n  const calcRequiredIncome = () => {\r\n    const resultMonthlyPayment = result.monthlyPayment.replace(/\\s/g, \"\");\r\n\r\n    const resultRequiredIncome = Math.round(5 * (+resultMonthlyPayment/3));\r\n\r\n    if (typeof resultRequiredIncome == 'number' && resultRequiredIncome >= 0 && resultRequiredIncome !== Infinity) {\r\n      result.requiredIncome = resultRequiredIncome.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \" \");\r\n    } else {\r\n      result.requiredIncome = '0';\r\n    }\r\n  };\r\n\r\n  const calcOverpayment = (price, part, months) => {\r\n    const numPrice = +(price.replace(/\\s/g, \"\"));\r\n    const numPart = +(part.replace(/\\s/g, \"\"));\r\n    const resultMonthlyPayment = result.monthlyPayment.replace(/\\s/g, \"\");\r\n\r\n    const resultOverpayment = Math.round(resultMonthlyPayment * months - numPrice + numPart);\r\n  \r\n    if (typeof resultOverpayment == 'number' && resultOverpayment >= 0 && numPrice > numPart) {\r\n      result.overpayment = resultOverpayment.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \" \");\r\n    } else {\r\n      result.overpayment = '0';\r\n    }\r\n  };\r\n\r\n  calcLoanBody(price, part);\r\n  calcMonthlyPayment(percent, months);\r\n  calcRequiredIncome();\r\n  calcOverpayment(price, part, months);\r\n\r\n  return result;\r\n};\r\n\r\nexport default Calc;","import Form from './form.js';\r\nexport default Form;","import React, { useState, useEffect } from 'react';\r\nimport './form.sass';\r\nimport Validate from './validate';\r\nimport Results from './results';\r\nimport Calc from './calc';\r\n\r\nconst Form = () => {\r\n  const savedPrice = localStorage.getItem('price');\r\n  const savedPart = localStorage.getItem('part');\r\n  const savedTime = localStorage.getItem('time');\r\n  const savedPercent = localStorage.getItem('percent');\r\n\r\n  const [price, setPrice] = useState(savedPrice || '0');\r\n  const [part, setPart] = useState(savedPart || '0');\r\n  const [time, setTime] = useState(savedTime || '0');\r\n  const [percent, setPercent] = useState(savedPercent || '0');\r\n\r\n  const [data, setData] = useState({\r\n    loanBody: 0,\r\n    monthlyPayment: 0,\r\n    requiredIncome: 0,\r\n    overpayment: 0,\r\n  });\r\n  const [disabled, setDisabled] = useState(false);\r\n  const [factor, setFactor] = useState(false);\r\n  const [lockClass, setLockClass] = useState('mortgage-form__lock mortgage-form__lock_opened');\r\n\r\n  useEffect(() => setData(Calc(price, part, time, percent)), [price, part, time, percent]);\r\n  useEffect(() => {\r\n    const numPrice = +(price.replace(/\\s/g, \"\"));\r\n    if (factor) setPart(Math.round(+numPrice * factor / 100)\r\n      .toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \" \"));\r\n  }, [price, factor]);\r\n\r\n  const anchor = (value) => {\r\n    setFactor(value);\r\n    setDisabled(true);\r\n    setLockClass('mortgage-form__lock mortgage-form__lock_locked');\r\n  };\r\n\r\n  const SaveButton = () => {\r\n    return (\r\n      <button onClick={e => {\r\n        e.preventDefault();\r\n        localStorage.setItem('price', price);\r\n        localStorage.setItem('part', part);\r\n        localStorage.setItem('time', time);\r\n        localStorage.setItem('percent', percent);\r\n      }}>Сохранить</button>\r\n    );\r\n  };\r\n\r\n  const ClearButton = () => {\r\n    return(\r\n      <button onClick={e => {\r\n        e.preventDefault();\r\n\r\n        setPrice('');\r\n        setPart('');\r\n        setTime('');\r\n        setPercent('');\r\n        setData({\r\n          loanBody: 0,\r\n          monthlyPayment: 0,\r\n          requiredIncome: 0,\r\n          overpayment: 0,\r\n        });\r\n        setDisabled(false);\r\n        setFactor(false);\r\n        document.querySelectorAll('input').forEach(item => item.value = '');\r\n        document.querySelectorAll('input[name=\"anchor\"]').forEach(item => item.checked = false);\r\n      }}>Очистить</button>\r\n    );\r\n  };\r\n\r\n  const Lock = () => {\r\n    return(\r\n      <div className={lockClass} onClick={e => {\r\n        if (disabled) {\r\n          setDisabled(false);\r\n          setFactor(false);\r\n          setLockClass('mortgage-form__lock mortgage-form__lock_opened');\r\n          document.querySelectorAll('input[name=\"anchor\"]').forEach(item => item.checked = false);\r\n        }\r\n      }}></div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <form className=\"mortgage-form\">\r\n        <div className=\"mortgage-form__input mortgage-form__input_rub\">\r\n          <label>Стоимость недвижимости</label>\r\n          <input onInput={e => {\r\n                            Validate(e.target, 10000000000);\r\n                            setPrice(e.target.value);}}\r\n                 placeholder=\"До 10 000 000 000\" \r\n                 value={price}></input>\r\n        </div>\r\n        <div className=\"mortgage-form__input mortgage-form__input_part mortgage-form__input_rub\">\r\n          <label>Первоначальный взнос</label>\r\n          <Lock />\r\n          <input onInput={e => {\r\n                            Validate(e.target, 5000000000);\r\n                            setPart(e.target.value);\r\n                            }} \r\n                 placeholder=\"До 5 000 000 000\"\r\n                 value={part}\r\n                 disabled={disabled}></input>\r\n        </div>\r\n        <div className=\"mortgage-form__anchors\">\r\n          <input className=\"mortgage-form__anchor mortgage-form__anchor_10\" \r\n                 type=\"radio\" \r\n                 name=\"anchor\" \r\n                 value=\"10\" \r\n                 onChange={e => anchor(e.target.value)}/>\r\n          <input className=\"mortgage-form__anchor mortgage-form__anchor_15\" \r\n                 type=\"radio\" \r\n                 name=\"anchor\" \r\n                 value=\"15\" \r\n                 onChange={e => anchor(e.target.value)}/>\r\n          <input className=\"mortgage-form__anchor mortgage-form__anchor_20\" \r\n                 type=\"radio\" \r\n                 name=\"anchor\" \r\n                 value=\"20\" \r\n                 onChange={e => anchor(e.target.value)}/>\r\n          <input className=\"mortgage-form__anchor mortgage-form__anchor_25\" \r\n                 type=\"radio\" \r\n                 name=\"anchor\" \r\n                 value=\"25\" \r\n                 onChange={e => anchor(e.target.value)}/>\r\n          <input className=\"mortgage-form__anchor mortgage-form__anchor_30\" \r\n                 type=\"radio\" \r\n                 name=\"anchor\" \r\n                 value=\"30\" \r\n                 onChange={e => anchor(e.target.value)}/>\r\n        </div>\r\n        <div className=\"mortgage-form__input mortgage-form__input_year\">\r\n          <label>Срок кредита</label>\r\n          <input onInput={e => {\r\n                            Validate(e.target, 30);\r\n                            setTime(e.target.value);}}\r\n                 placeholder=\"До 30\"\r\n                 value={time}></input>\r\n        </div>\r\n        <div className=\"mortgage-form__input mortgage-form__input_perc\">\r\n          <label>Процентная ставка</label>\r\n          <input onInput={e => {\r\n                            Validate(e.target, 30);\r\n                            setPercent(e.target.value);}}\r\n                 placeholder=\"До 30\"\r\n                 value={percent}></input>\r\n        </div>\r\n        <div className=\"mortgage-form__buttons\">\r\n          <SaveButton />\r\n          <ClearButton />\r\n        </div>\r\n      </form>\r\n      <Results loanBody={data.loanBody}\r\n               monthlyPayment={data.monthlyPayment}\r\n               requiredIncome={data.requiredIncome}\r\n               overpayment={data.overpayment} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Form;","import App from './app.js';\r\nexport default App;","import React from 'react';\r\nimport Form from '../form';\r\nimport './app.sass';\r\n\r\nconst App = () => {\r\n  \r\n  return (\r\n    <div className=\"mortgage-calc\">\r\n      <h1 className=\"mortgage-calc__header\">Ипотечный калькулятор 🏡</h1>\r\n      <Form />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './components/app';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}